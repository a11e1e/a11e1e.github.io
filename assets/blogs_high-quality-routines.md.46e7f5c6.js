import{_ as e,c as l,o as i,d as a}from"./app.cdf062b3.js";const d='{"title":"撰写高质量的例程","description":"本文是《代码大全》第六章的笔记。","frontmatter":{"date":"2021-11-26T00:00:00.000Z","title":"撰写高质量的例程","description":"本文是《代码大全》第六章的笔记。"},"headers":[{"level":2,"title":"给我一个理由去撰写高质量的函数","slug":"给我一个理由去撰写高质量的函数"},{"level":2,"title":"好的函数名","slug":"好的函数名"},{"level":3,"title":"描述例程所做的一切","slug":"描述例程所做的一切"},{"level":3,"title":"避免使用模糊的动词","slug":"避免使用模糊的动词"},{"level":3,"title":"不要加上数字来区分函数","slug":"不要加上数字来区分函数"},{"level":3,"title":"函数名可以长一些","slug":"函数名可以长一些"},{"level":3,"title":"用返回值来命名函数（function）","slug":"用返回值来命名函数（function）"},{"level":3,"title":"用动词+名词来命名过程（procedure）","slug":"用动词-名词来命名过程（procedure）"},{"level":3,"title":"正确使用反义词","slug":"正确使用反义词"},{"level":3,"title":"约定一致的准则","slug":"约定一致的准则"},{"level":2,"title":"一个函数应该多长？","slug":"一个函数应该多长？"},{"level":2,"title":"函数的参数","slug":"函数的参数"},{"level":3,"title":"参数顺序","slug":"参数顺序"},{"level":3,"title":"如果多个函数使用类似的参数，那么这几个函数的参数顺序应当相同。","slug":"如果多个函数使用类似的参数，那么这几个函数的参数顺序应当相同。"},{"level":3,"title":"所有的参数都要被用到","slug":"所有的参数都要被用到"},{"level":3,"title":"尽可能不要去更改参数","slug":"尽可能不要去更改参数"},{"level":3,"title":"参数不要超过七个","slug":"参数不要超过七个"}],"relativePath":"blogs/high-quality-routines.md","lastUpdated":1637933139166}',r={},t=[a('<h1 id="撰写高质量的例程" tabindex="-1">撰写高质量的例程 <a class="header-anchor" href="#撰写高质量的例程" aria-hidden="true">#</a></h1><p>什么是<em>例程</em>？</p><p>例程是为了一个单一目的所调用的方法。</p><p>在大部分语言中，例程（包括 JavaScript / C++ ）就是一个函数。所以本文几乎可以等同于「如何撰写高质量的函数」？下文我会用「函数」代替「例程」，因为函数听上去更加亲近。</p><h2 id="给我一个理由去撰写高质量的函数" tabindex="-1">给我一个理由去撰写高质量的函数 <a class="header-anchor" href="#给我一个理由去撰写高质量的函数" aria-hidden="true">#</a></h2><p>我认为两点就够了：</p><ul><li>减少复杂性</li><li>代码复用</li></ul><p>书中还介绍了诸如：</p><ul><li>隐藏指针操作</li><li>简化测试</li><li>提升性能</li><li>...</li></ul><p>这些都是理由，但我认为前两点就已经足够。</p><h2 id="好的函数名" tabindex="-1">好的函数名 <a class="header-anchor" href="#好的函数名" aria-hidden="true">#</a></h2><h3 id="描述例程所做的一切" tabindex="-1">描述例程所做的一切 <a class="header-anchor" href="#描述例程所做的一切" aria-hidden="true">#</a></h3><p>好的函数名应当清晰地描述函数所做的一切。</p><p>如果有那么一个函数，计算一些数据，并且打开一个输出用的文件。那么<code>ComputeReportTotals</code>就不够准确。而<code>ComputeReportTotalsAndOpenOutputFile</code>就太长太蠢了。如果你的函数里有副作用（在这个例子中就是打开一个输出文件），那么你就很容易得到一个很长很蠢的名字。</p><p>所以你的函数应该</p><ul><li>尽可能不要有副作用</li><li>少用描述性的词语</li></ul><h3 id="避免使用模糊的动词" tabindex="-1">避免使用模糊的动词 <a class="header-anchor" href="#避免使用模糊的动词" aria-hidden="true">#</a></h3><p>反面教材：</p><ul><li><code>HandleCalculation</code></li><li><code>PerformServices</code></li><li><code>OutputUser</code></li><li><code>ProcessInput</code></li></ul><p>但“handle”有时候是个例外。对于事件处理函数来说，偶尔使用也无可厚非。</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>有时候，你的函数写的很好，但只是名字没取好。而有时候你的函数本身就做了一件很模糊的事情，这就说明你可能需要重构一下这个函数，使之具有更强的目的性。</p></div><h3 id="不要加上数字来区分函数" tabindex="-1">不要加上数字来区分函数 <a class="header-anchor" href="#不要加上数字来区分函数" aria-hidden="true">#</a></h3><ul><li><code>OutputUser</code></li><li><code>OutputUser1</code></li><li><code>OutputUser2</code></li></ul><p>看着不觉得恶心么？</p><h3 id="函数名可以长一些" tabindex="-1">函数名可以长一些 <a class="header-anchor" href="#函数名可以长一些" aria-hidden="true">#</a></h3><p>研究表示最好的函数名应该在<strong>9-15</strong>个字符之间。</p><p>函数名和变量名不一样，可以长一点。</p><h3 id="用返回值来命名函数（function）" tabindex="-1">用返回值来命名函数（function） <a class="header-anchor" href="#用返回值来命名函数（function）" aria-hidden="true">#</a></h3><p>如果一个函数有返回值，那么应该用返回值来命名函数。</p><ul><li><code>customerId.Next()</code></li><li><code>pen.CurrentColor()</code></li><li><code>printer.IsReady()</code></li></ul><h3 id="用动词-名词来命名过程（procedure）" tabindex="-1">用动词+名词来命名过程（procedure） <a class="header-anchor" href="#用动词-名词来命名过程（procedure）" aria-hidden="true">#</a></h3><p>如果一个函数没有返回值，那么应该用动词+名词来命名。</p><ul><li><code>PrintDocument</code></li><li><code>checkOrderInfo</code></li></ul><p>如果这个函数是一个类方法，有时候就不需要名词，直接动词就好了。</p><ul><li><code>document.Print</code></li><li><code>orderInfo.Check</code></li></ul><h3 id="正确使用反义词" tabindex="-1">正确使用反义词 <a class="header-anchor" href="#正确使用反义词" aria-hidden="true">#</a></h3><p>书中举了很多例子</p><ul><li>add / remove</li><li>lock / unlock</li><li>show / hide</li><li>source / target</li></ul><p>不一而足。</p><h3 id="约定一致的准则" tabindex="-1">约定一致的准则 <a class="header-anchor" href="#约定一致的准则" aria-hidden="true">#</a></h3><p>比如同样获取用户<code>id</code></p><ul><li><code>employee.id.Get()</code></li><li><code>dependent.GetId()</code></li><li><code>candidate.id()</code></li></ul><p>这就看起来很杂乱。应当规定好只使用一种方式获取 id。</p><h2 id="一个函数应该多长？" tabindex="-1">一个函数应该多长？ <a class="header-anchor" href="#一个函数应该多长？" aria-hidden="true">#</a></h2><p>这个问题没有很明确的回答。</p><p>一种说法是，一个函数应该能用一个屏幕 🖥 看完。另一种说法是用两张纸能打印完。根据这些说法，大概 50 - 150 行是个合理范围。</p><p>书中还介绍了很多研究。最终给出了一个结论————<strong>不算注释的话，超过两百行的函数可能就需要小心了</strong>。</p><h2 id="函数的参数" tabindex="-1">函数的参数 <a class="header-anchor" href="#函数的参数" aria-hidden="true">#</a></h2><h3 id="参数顺序" tabindex="-1">参数顺序 <a class="header-anchor" href="#参数顺序" aria-hidden="true">#</a></h3><p>参数顺序应当是</p><ul><li>输入的参数</li><li>被更改的参数</li><li>输出的参数。</li></ul><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>将参数作为返回值一般来说是 C/C++ 会做的事情，JavaScript 很少会这么做。</p></div><h3 id="如果多个函数使用类似的参数，那么这几个函数的参数顺序应当相同。" tabindex="-1">如果多个函数使用类似的参数，那么这几个函数的参数顺序应当相同。 <a class="header-anchor" href="#如果多个函数使用类似的参数，那么这几个函数的参数顺序应当相同。" aria-hidden="true">#</a></h3><h3 id="所有的参数都要被用到" tabindex="-1">所有的参数都要被用到 <a class="header-anchor" href="#所有的参数都要被用到" aria-hidden="true">#</a></h3><h3 id="尽可能不要去更改参数" tabindex="-1">尽可能不要去更改参数 <a class="header-anchor" href="#尽可能不要去更改参数" aria-hidden="true">#</a></h3><h3 id="参数不要超过七个" tabindex="-1">参数不要超过七个 <a class="header-anchor" href="#参数不要超过七个" aria-hidden="true">#</a></h3><p>七个数字是大部分人记忆的极限。你可以记住一个六位数，但你很难瞬间记住一个 11 位的电话号码。</p>',57)];var c=e(r,[["render",function(e,a,d,r,c,h){return i(),l("div",null,t)}]]);export{d as __pageData,c as default};
